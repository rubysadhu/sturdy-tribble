(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1016:function(e,t,n){"use strict";n.r(t);var r=n(267),d=n.n(r),o=n(280),c=n.n(o),l=n(281),m=n.n(l),v=n(109),f=n(251),k=n.n(f),_={layout:"admin",components:{SlideYUpTransition:v.b},data:function(){return{orders:[],viewOrderPopup:!1,viewedOrder:{}}},apollo:{$subscribe:{pickup_orders:{query:d.a,variables:function(){return{ID:this.$route.params.id}},result:function(e){var data=e.data;this.orders=data.pickup_orders}}}},methods:{confirmOrder:function(e){this.$apollo.mutate({mutation:c.a,variables:{ID:e.id}}),this.viewOrderPopup=!1},completeOrder:function(e){this.$apollo.mutate({mutation:m.a,variables:{ID:e.id}})},calcOrderTotal:function(e){var t=0;return e.forEach((function(e){t+=parseFloat(e.menu_item.price)})),t.toFixed(2)},showPopup:function(e){this.viewOrderPopup=!0,this.viewedOrder=e},closeModals:function(){this.viewOrderPopup=!1}},computed:{pending_orders:function(){var e=k.a.filter(this.orders,{confirmed:!1,completed:!1});e[0];return e},active_orders:function(){return k.a.filter(this.orders,{confirmed:!0,completed:!1})},completed_orders:function(){return k.a.filter(this.orders,{completed:!0})}}},h=(n(417),n(13)),component=Object(h.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[e.viewOrderPopup?n("div",{staticClass:"bg-gray-900 opacity-75 transition ease-in-out duration-200",staticStyle:{left:"0",top:"0",position:"fixed",width:"100%",height:"100vh","z-index":"999"},attrs:{id:"overlay"}}):e._e(),e._v(" "),n("slide-y-up-transition",[e.viewOrderPopup?n("div",{staticClass:"bg-white relative rounded-md p-6 shadow-md",staticStyle:{left:"5%",top:"5%",position:"fixed",width:"90%","z-index":"999"}},[n("i",{staticClass:"cursor-pointer absolute top-0 right-0 py-2 px-4 text-5xl leading-none tracking-none text-gray-800 far fa-times",on:{click:function(t){return e.closeModals()}}}),e._v(" "),n("div",[n("h3",{staticClass:"text-lg leading-6 font-medium mb-3 text-gray-700"},[e._v("\n          Order #"+e._s(e.viewedOrder.id)+"\n        ")]),e._v(" "),n("h3",{staticClass:"text-2xl leading-6 font-bold mb-1 text-gray-900"},[e._v(e._s(e.viewedOrder.customer_name))]),e._v(" "),n("h5",{staticClass:"text-xl font-normal"},[e._v(e._s(e.viewedOrder.customer_phone_number))])]),e._v(" "),n("div",{staticClass:"mt-5"},[n("dl",{staticClass:"mb-6"},[n("div",{staticClass:"mt-6 sm:grid sm:mt-5 sm:grid-cols-3 sm:gap-4 sm:border-t sm:border-gray-200 sm:pt-3 -mb-2"},[n("dt",{staticClass:"text-md leading-5 font-medium text-gray-500"},[e._v("\n              ITEM\n            ")]),e._v(" "),n("dd",{staticClass:"mt-1 text-md font-medium leading-5 text-gray-500 sm:mt-0 sm:col-span-2"},[e._v("\n              NOTES\n            ")])]),e._v(" "),e._l(e.viewedOrder.order_items,(function(t){return n("div",{key:t,staticClass:"mt-8 sm:grid sm:mt-5 sm:grid-cols-3 sm:gap-4 sm:border-t sm:border-gray-200 sm:pt-5 text-lg"},[n("dt",{staticClass:"leading-5 font-medium text-gray-900"},[n("span",{staticClass:"mr-3"},[e._v("1")]),e._v(" "+e._s(t.menu_item.name)+"\n            ")]),e._v(" "),t.notes?n("dd",{staticClass:"mt-1 italic leading-5 text-gray-900 sm:mt-0 sm:col-span-2"},[e._v('\n              "'+e._s(t.notes)+'"\n            ')]):n("dd",{staticClass:"mt-1 italic leading-5 text-gray-400 font-bold sm:mt-0 sm:col-span-2"},[n("i",{staticClass:"far fa-horizontal-rule"})])])}))],2),e._v(" "),e.viewedOrder.confirmed?e._e():n("div",{staticClass:"bg-green-500 flex-grow text-white text-center uppercase flex-grow cursor-pointer text-white text-xl font-bold py-3 px-6 rounded",on:{click:function(t){return e.confirmOrder(e.viewedOrder)}}},[e._v("Confirm Order")])])]):e._e()]),e._v(" "),n("adminNav",{attrs:{active:"kitchen"}}),e._v(" "),n("div",{staticClass:"grid grid-cols-3 gap-0 h-screen"},[n("div",{staticClass:"border-r border-gray-300"},[e._m(0),e._v(" "),n("div",{staticClass:"p-5"},[n("slide-y-up-transition",{attrs:{group:""}},e._l(e.pending_orders,(function(t,r){return n("div",{key:r,staticClass:"rounded bg-white p-4 mb-2"},[n("h1",{staticClass:"text-sm text-gray-500 mb-1"},[n("span",{staticClass:"float-right"},[e._v(e._s(t.order_items_aggregate.aggregate.count)+" Items")]),e._v(" #"+e._s(t.id)+"\n            ")]),e._v(" "),n("div",{staticClass:"flex items-center text-lg mb-3 justify-between font-medium"},[n("div",[n("h3",[e._v(e._s(t.customer_name))])]),e._v(" "),n("div",[e._v("$"+e._s(e.calcOrderTotal(t.order_items)))])]),e._v(" "),n("div",{staticClass:" mt-2"},[n("div",{staticClass:"bg-red-500 uppercase text-white cursor-pointer font-bold py-3 px-4 rounded text-center",on:{click:function(n){return e.showPopup(t)}}},[n("span",[e._v("View Order")])])])])})),0)],1)]),e._v(" "),n("div",{staticClass:"border-r border-gray-300"},[e._m(1),e._v(" "),n("div",{staticClass:"p-5"},[n("slide-y-up-transition",{attrs:{group:""}},e._l(e.active_orders,(function(t,r){return n("div",{key:r,staticClass:"rounded bg-white p-4 mb-2"},[n("h1",{staticClass:"text-sm text-gray-500 mb-1"},[n("span",{staticClass:"float-right"},[e._v(e._s(t.order_items_aggregate.aggregate.count)+" Items")]),e._v(" #"+e._s(t.id)+"\n            ")]),e._v(" "),n("div",{staticClass:"flex items-center text-lg mb-3 justify-between font-medium"},[n("div",[n("h3",[e._v(e._s(t.customer_name))])]),e._v(" "),n("div",[e._v("$"+e._s(e.calcOrderTotal(t.order_items)))])]),e._v(" "),n("div",{staticClass:"flex items-center mt-2"},[n("div",{staticClass:"bg-gray-500 uppercase text-center text-white  mr-3 cursor-pointer font-bold py-3 px-4 rounded",on:{click:function(n){return e.showPopup(t)}}},[n("span",[e._v("View")])]),e._v(" "),n("div",{staticClass:"bg-green-500 uppercase text-center text-white flex-grow cursor-pointer text-white font-bold py-3 px-4 rounded",on:{click:function(n){return e.completeOrder(t)}}},[n("i",{staticClass:"fad fa-check-circle mr-1"}),e._v(" Mark as Done")])])])})),0)],1)]),e._v(" "),n("div",[e._m(2),e._v(" "),n("div",{staticClass:"p-5"},e._l(e.completed_orders,(function(t,r){return n("div",{key:r,staticClass:"cursor-pointer text-gray-500 hover:text-gray-800 hover:shadow rounded bg-white p-4 mb-2",on:{click:function(n){return e.showPopup(t)}}},[n("h1",{staticClass:"text-sm"},[e._v("\n            #"+e._s(t.id)+"\n          ")]),e._v(" "),n("div",{staticClass:"flex items-center justify-between font-medium"},[n("div",[n("h3",[e._v(e._s(t.customer_name))])]),e._v(" "),n("div",[e._v("$"+e._s(e.calcOrderTotal(t.order_items)))])])])})),0)])])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:" border-b border-gray-300 p-5 bg-white sticky flex items-center",staticStyle:{position:"sticky",top:"0",left:"0"}},[t("div",{staticClass:"pendingBlock bg-red-500"}),this._v(" "),t("h2",{staticClass:"font-bold text-lg"},[this._v("Pending")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:" border-b border-gray-300 p-5 bg-white sticky flex items-center",staticStyle:{position:"sticky",top:"0",left:"0"}},[t("div",{staticClass:"pendingBlock bg-orange-300"}),this._v(" "),t("h2",{staticClass:"font-bold text-lg"},[this._v("Confirmed")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"border-b border-gray-300 p-5 bg-white sticky flex items-center",staticStyle:{position:"sticky",top:"0",left:"0"}},[t("div",{staticClass:"pendingBlock bg-green-500"}),this._v(" "),t("h2",{staticClass:"font-bold text-lg"},[this._v("Completed")])])}],!1,null,"b4db730a",null);t.default=component.exports},267:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"subscription",name:{kind:"Name",value:"getAllOrders"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pickup_orders"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"customer_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"customer_phone_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"confirmed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"completed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"order_items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"menu_item"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"notes"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"order_items_aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:336}};n.loc.source={body:"subscription getAllOrders {\r\n  pickup_orders {\r\n    id\r\n    customer_name\r\n    customer_phone_number\r\n    confirmed\r\n    completed\r\n    order_items {\r\n      menu_item {\r\n        name\r\n        description\r\n        price\r\n      }\r\n      notes\r\n    }\r\n    order_items_aggregate {\r\n      aggregate {\r\n        count\r\n      }\r\n    }\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function d(e,t){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==t)return element}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=n,e.exports.getAllOrders=function(e,t){var n={kind:e.kind,definitions:[d(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var o=r[t]||new Set,c=new Set,l=new Set;for(o.forEach((function(e){l.add(e)}));l.size>0;){var m=l;l=new Set,m.forEach((function(e){c.has(e)||(c.add(e),(r[e]||new Set).forEach((function(e){l.add(e)})))}))}return c.forEach((function(t){var r=d(e,t);r&&n.definitions.push(r)})),n}(n,"getAllOrders")},280:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"confirmOrder"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ID"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"update_pickup_orders"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"ID"}}}]}}]}},{kind:"Argument",name:{kind:"Name",value:"_set"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"confirmed"},value:{kind:"BooleanValue",value:!0}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"affected_rows"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:138}};n.loc.source={body:"mutation confirmOrder($ID: Int) {\r\n  update_pickup_orders(where: {id: {_eq: $ID}}, _set: {confirmed: true}) {\r\n    affected_rows\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function d(e,t){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==t)return element}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=n,e.exports.confirmOrder=function(e,t){var n={kind:e.kind,definitions:[d(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var o=r[t]||new Set,c=new Set,l=new Set;for(o.forEach((function(e){l.add(e)}));l.size>0;){var m=l;l=new Set,m.forEach((function(e){c.has(e)||(c.add(e),(r[e]||new Set).forEach((function(e){l.add(e)})))}))}return c.forEach((function(t){var r=d(e,t);r&&n.definitions.push(r)})),n}(n,"confirmOrder")},281:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"complateOrder"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ID"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"update_pickup_orders"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"ID"}}}]}}]}},{kind:"Argument",name:{kind:"Name",value:"_set"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"completed"},value:{kind:"BooleanValue",value:!0}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"affected_rows"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:139}};n.loc.source={body:"mutation complateOrder($ID: Int) {\r\n  update_pickup_orders(where: {id: {_eq: $ID}}, _set: {completed: true}) {\r\n    affected_rows\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function d(e,t){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==t)return element}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=n,e.exports.complateOrder=function(e,t){var n={kind:e.kind,definitions:[d(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var o=r[t]||new Set,c=new Set,l=new Set;for(o.forEach((function(e){l.add(e)}));l.size>0;){var m=l;l=new Set,m.forEach((function(e){c.has(e)||(c.add(e),(r[e]||new Set).forEach((function(e){l.add(e)})))}))}return c.forEach((function(t){var r=d(e,t);r&&n.definitions.push(r)})),n}(n,"complateOrder")},297:function(e,t,n){var content=n(418);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(36).default)("b639585c",content,!0,{sourceMap:!1})},417:function(e,t,n){"use strict";var r=n(297);n.n(r).a},418:function(e,t,n){(t=n(35)(!1)).push([e.i,".pendingBlock[data-v-b4db730a]{height:20px;width:20px;border-radius:20px;margin-right:10px}[data-v-b4db730a]::-webkit-scrollbar{width:12px}[data-v-b4db730a]::-webkit-scrollbar-track{background:#edf2f7;border-radius:10px}[data-v-b4db730a]::-webkit-scrollbar-thumb{border-radius:10px;background:#a0aec0}",""]),e.exports=t}}]);